<!DOCTYPE html>
<html lang='en'>

<head>
    <meta charset='utf-8'>
    <title>SVTopo</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.9.2/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crossfilter2/1.4.7/crossfilter.min.js"
        type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dc/3.0.12/dc.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.bundle.min.js"
        type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/viewerjs/1.5.0/viewer.min.js" type="text/javascript"></script>
    <script src="https://cdn.datatables.net/v/bs4/dt-1.10.20/b-1.6.1/b-html5-1.6.1/sc-2.0.1/sl-1.3.1/datatables.min.js"
        type="text/javascript"></script>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/viewerjs/1.5.0/viewer.min.css" rel="stylesheet"
        type="text/css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" rel="stylesheet"
        type="text/css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet"
        type="text/css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/dc/3.0.12/dc.min.css" rel="stylesheet" type="text/css" />
    <link href="https://cdn.datatables.net/v/bs4/dt-1.10.20/b-1.6.1/b-html5-1.6.1/sc-2.0.1/sl-1.3.1/datatables.min.css"
        rel="stylesheet" type="text/css" />

    <script>
        const data = [{"chrom": "chr3", "chrom2": null, "end": 82170603, "image_name": "tmp_chr3-82132007-82170603", "nvariants": 4, "samples": "tmp", "start": 82132007, "svlength": 38596, "variant_ids": null}]
        const unique_data = [{"chrom": "chr3", "chrom2": null, "end": 82170603, "image_name": "tmp_chr3-82132007-82170603", "nvariants": 4, "samples": "tmp", "start": 82132007, "svlength": 38596, "variant_ids": null}]
        const plot_type = "png"
    </script>
    <script src="js/app.js" type="text/javascript"></script>
    <link href="stylesheets/styles.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <nav class="navbar navbar-dark p-0 pl-2">
        <div class="navbar-center-container">
            <div class="navbar-brand text-light p-0">
                <img src="svtopo.png" class="navbar-logo d-inline-block mr-3" alt="SVTopo Logo">
                SVTopo
            </div>
        </div>
        <a class="github-link github-container pr-2" href="https://github.com/PacificBiosciences/HiFi-SVTopo"
            target="_blank">
            <img src="github-mark-white.png" class="navbar-logo" alt="GitHub link">
            <span class="github-label">See it on GitHub</span>
        </a>
    </nav>

    <div id="help-div" class="help-div" style="display: none;">
        <h4>User help</h4>
        <ul class="help-list">
            <li>Click any row to view the variant image.</li>
            <li>Use left/right arrow keys to navigate between rows.</li>
            <li>Click Sample, # of Variants, or Variant ID (if present) to filter.</li>
            <li>Use the filter button <i class="fas fa-filter"></i> for advanced filtering.</li>
            <li>Use the "Show multi-region entries only once" toggle to filter out duplicate entries across regions.</li>
            <li>Right-click on any row to access additional options like copying URLs or viewing images.</li>
        </ul>
    </div>

    <div class="modal fade" id="filter-modal" tabindex="-1" role="dialog" aria-labelledby="filter-modal"
        aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="flex-column">
                        <h5 class="modal-title" id="filter-modal">Filters</h5>
                        <h7 class="pl-2 text-secondary" id="variant-count">
                            <a href="javascript:resetFilter()">Reset All</a>
                        </h7>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="container">
                        <div class="row pt-2">
                            <div class="col">
                                <h5>Variant ID</h5>
                            </div>
                        </div>
                        <div class="row pb-3">
                            <div class="col-12">
                                <div id="variant-search"></div>
                            </div>
                        </div>
                        <div class="row pt-2">
                            <div class="col">
                                <h5>Sample</h5>
                            </div>
                        </div>
                        <div class="row pb-3">
                            <div class="col-12">
                                <div id="sample-search"></div>
                            </div>
                        </div>
                        <div class="row" id="nvariants-chart">
                            <div class="col-4">
                                <h5># of Variants</h5>
                            </div>
                            <div class="col-8 text-right">
                                <span class="reset text-muted" style="display: none;">[<span
                                        class="filter"></span>]</span>
                                <a class="reset" href="javascript:resetNVariantsChart();"
                                    style="display: none;">Reset</a>
                            </div>
                        </div>
                        <div class="row" id="size-chart">
                            <div class="col-4">
                                <h5>Size</h5>
                            </div>
                            <div class="col-8 text-right">
                                <span class="reset text-muted" style="display: none;">[<span
                                        class="filter"></span>]</span>
                                <a class="reset" href="javascript:resetSizeChart();"
                                    style="display: none;">Reset</a>
                            </div>
                        </div>
                        <div class="row" id="chrom-chart">
                            <div class="col-4">
                                <h5>Chromosome</h5>
                            </div>
                            <div class="col-8 text-right">
                                <span class="reset text-muted" style="display: none;">[<span
                                        class="filter"></span>]</span>
                                <a class="reset" href="javascript:resetChromChart();"
                                    style="display: none;">Reset</a>
                            </div>
                        </div>
                        <div class="row" id="overlaps-chart" hidden>
                            <div class="col-4">
                                <h5>SV Overlaps</h5>
                            </div>
                            <div class="col-8 text-right">
                                <span class="reset text-muted" style="display: none;">[<span
                                        class="filter"></span>]</span>
                                <a class="reset" href="javascript:resetOverlapsChart();"
                                    style="display: none;">Reset</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-dismiss="modal"
                        onclick="javascript:resetAllCharts();"
                        title="Clear selection and close">Cancel</button>
                    <button type="button" class="btn btn-primary" data-dismiss="modal"
                        title="Apply filters">Apply</button>
                </div>
            </div>
        </div>
    </div>

    <div class="container-fluid h-90">
        <div class="row" id="variant-table-placeholder">
            <div class="col-12">
                <div style="height:415px">
                    <div class="d-flex justify-content-center align-items-center text-muted h-100">
                        <div class="d-flex flex-column">
                            <i class="fas fa-10x fa-table"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row pb-1" id="variant-table-div" hidden>
            <div class="col-12">
                <div class="table-responsive">
                    <table id="variant-table" class="table table-hover display nowrap" width="100%"></table>
                </div>
            </div>
        </div>
    </div>

    <!-- Custom context menu -->
    <div id="context-menu" class="custom-context-menu">
        <div class="context-menu-item" id="copy-image-url">Copy Image URL</div>
        <div class="context-menu-item" id="copy-page-url">Copy Page URL with Hash</div>
        <div class="context-menu-item" id="view-image">View Image</div>
    </div>

    <!-- Success message for clipboard operations -->
    <div class="clipboard-success">URL copied to clipboard!</div>
</body>

</html>
